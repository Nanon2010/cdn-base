!function(g){function b(){if(g.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}g.fn.ajaxSubmit=function(h){if(!this.length)return b("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof h&&(h={success:h});var e=g.trim(this.attr("action"));e&&(e=(e.match(/^([^#]+)/)||[])[1]),e=e||window.location.href||"",h=g.extend({url:e,type:this.attr("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},h||{});var t={};if(this.trigger("form-pre-serialize",[this,h,t]),t.veto)return b("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(h.beforeSerialize&&!1===h.beforeSerialize(this,h))return b("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a=this.formToArray(h.semantic);if(h.data)for(var r in h.extraData=h.data,h.data)if(h.data[r]instanceof Array)for(var n in h.data[r])a.push({name:r,value:h.data[r][n]});else a.push({name:r,value:h.data[r]});if(h.beforeSubmit&&!1===h.beforeSubmit(a,this,h))return b("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,h,t]),t.veto)return b("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var i=g.param(a);"GET"==h.type.toUpperCase()?(h.url+=(0<=h.url.indexOf("?")?"&":"?")+i,h.data=null):h.data=i;var v=this,o=[];if(h.resetForm&&o.push(function(){v.resetForm()}),h.clearForm&&o.push(function(){v.clearForm()}),!h.dataType&&h.target){var s=h.success||function(){};o.push(function(e){var t=h.replaceTarget?"replaceWith":"html";g(h.target)[t](e).each(s,arguments)})}else h.success&&o.push(h.success);h.success=function(e,t,a){for(var r=0,n=o.length;r<n;r++)o[r].apply(h,[e,t,a||v,v])};for(var l=g("input:file",this).fieldValue(),u=!1,c=0;c<l.length;c++)l[c]&&(u=!0);return l.length&&!1!==h.iframe||h.iframe||u?h.closeKeepAlive?g.get(h.closeKeepAlive,f):f():g.ajax(h),this.trigger("form-submit-notify",[this,h]),this;function f(){var n=v[0];if(g(":input[name=submit]",n).length)alert('Error: Form elements must not be named "submit".');else{var o=g.extend({},g.ajaxSettings,h),e=g.extend(!0,{},g.extend(!0,{},g.ajaxSettings),o),i="jqFormIO"+(new Date).getTime(),s=g('<iframe id="'+i+'" name="'+i+'" src="'+o.iframeSrc+'" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />'),l=s[0];s.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){this.aborted=1,s.attr("src",o.iframeSrc)}},c=o.global;if(c&&!g.active++&&g.event.trigger("ajaxStart"),c&&g.event.trigger("ajaxSend",[u,o]),e.beforeSend&&!1===e.beforeSend(u,e))e.global&&g.active--;else if(!u.aborted){var f=!1,m=0,t=n.clk;if(t){var a=t.name;a&&!t.disabled&&(o.extraData=o.extraData||{},o.extraData[a]=t.value,"image"==t.type&&(o.extraData[a+".x"]=n.clk_x,o.extraData[a+".y"]=n.clk_y))}o.forceSync?r():setTimeout(r,10);var d=100}}function r(){var e=v.attr("target"),t=v.attr("action");n.setAttribute("target",i),"POST"!=n.getAttribute("method")&&n.setAttribute("method","POST"),n.getAttribute("action")!=o.url&&n.setAttribute("action",o.url),o.skipEncodingOverride||v.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),o.timeout&&setTimeout(function(){m=!0,p()},o.timeout);var a=[];try{if(o.extraData)for(var r in o.extraData)a.push(g('<input type="hidden" name="'+r+'" value="'+o.extraData[r]+'" />').appendTo(n)[0]);s.appendTo("body"),s.data("form-plugin-onload",p),n.submit()}finally{n.setAttribute("action",t),e?n.setAttribute("target",e):v.removeAttr("target"),g(a).remove()}}function p(){if(!f){var t=!0;try{if(m)throw"timeout";var e,a;a=l.contentWindow?l.contentWindow.document:l.contentDocument?l.contentDocument:l.document;var r="xml"==o.dataType||a.XMLDocument||g.isXMLDoc(a);if(b("isXml="+r),!r&&(null==a.body||""==a.body.innerHTML))return--d?(b("requeing onLoad callback, DOM not available"),void setTimeout(p,250)):void b("Could not access iframe DOM after 100 tries.");if(b("response detected"),f=!0,u.responseText=a.body?a.body.innerHTML:null,u.responseXML=a.XMLDocument?a.XMLDocument:a,u.getResponseHeader=function(e){return{"content-type":o.dataType}[e]},"json"==o.dataType||"script"==o.dataType){var n=a.getElementsByTagName("textarea")[0];if(n)u.responseText=n.value;else{var i=a.getElementsByTagName("pre")[0];i&&(u.responseText=i.innerHTML)}}else"xml"!=o.dataType||u.responseXML||null==u.responseText||(u.responseXML=function(e,t){window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml");return t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null}(u.responseText));e=g.httpData(u,o.dataType)}catch(e){b("error caught:",e),t=!1,u.error=e,g.handleError(o,u,"error",e)}t&&(o.success(e,"success"),c&&g.event.trigger("ajaxSuccess",[u,o])),c&&g.event.trigger("ajaxComplete",[u,o]),c&&!--g.active&&g.event.trigger("ajaxStop"),o.complete&&o.complete(u,t?"success":"error"),setTimeout(function(){s.removeData("form-plugin-onload"),s.remove(),u.responseXML=null},100)}}}},g.fn.ajaxForm=function(t){return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.preventDefault(),g(this).ajaxSubmit(t)}).bind("click.form-plugin",function(e){var t=e.target,a=g(t);if(!a.is(":submit,input:image")){var r=a.closest(":submit");if(0==r.length)return;t=r[0]}var n=this;if("image"==(n.clk=t).type)if(null!=e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof g.fn.offset){var i=a.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},g.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},g.fn.formToArray=function(e){var t=[];if(0==this.length)return t;var a=this[0],r=e?a.getElementsByTagName("*"):a.elements;if(!r)return t;for(var n=0,i=r.length;n<i;n++){var o=r[n];if(c=o.name)if(e&&a.clk&&"image"==o.type)o.disabled||a.clk!=o||(t.push({name:c,value:g(o).val()}),t.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}));else{var s=g.fieldValue(o,!0);if(s&&s.constructor==Array)for(var l=0,u=s.length;l<u;l++)t.push({name:c,value:s[l]});else null!=s&&t.push({name:c,value:s})}}if(!e&&a.clk){var c,f=g(a.clk),m=f[0];(c=m.name)&&!m.disabled&&"image"==m.type&&(t.push({name:c,value:f.val()}),t.push({name:c+".x",value:a.clk_x},{name:c+".y",value:a.clk_y}))}return t},g.fn.formSerialize=function(e){return g.param(this.formToArray(e))},g.fn.fieldSerialize=function(n){var i=[];return this.each(function(){var e=this.name;if(e){var t=g.fieldValue(this,n);if(t&&t.constructor==Array)for(var a=0,r=t.length;a<r;a++)i.push({name:e,value:t[a]});else null!=t&&i.push({name:this.name,value:t})}}),g.param(i)},g.fn.fieldValue=function(e){for(var t=[],a=0,r=this.length;a<r;a++){var n=this[a],i=g.fieldValue(n,e);null==i||i.constructor==Array&&!i.length||(i.constructor==Array?g.merge(t,i):t.push(i))}return t},g.fieldValue=function(e,t){var a=e.name,r=e.type,n=e.tagName.toLowerCase();if(void 0===t&&(t=!0),t&&(!a||e.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!e.checked||("submit"==r||"image"==r)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"==n){var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,l="select-one"==r,u=l?i+1:s.length,c=l?i:0;c<u;c++){var f=s[c];if(f.selected){var m=f.value;if(m||(m=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),l)return m;o.push(m)}}return o}return e.value},g.fn.clearForm=function(){return this.each(function(){g("input,select,textarea",this).clearFields()})},g.fn.clearFields=g.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},g.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},g.fn.enable=function(e){return null==e&&(e=!0),this.each(function(){this.disabled=!e})},g.fn.selected=function(a){return null==a&&(a=!0),this.each(function(){var e=this.type;if("checkbox"==e||"radio"==e)this.checked=a;else if("option"==this.tagName.toLowerCase()){var t=g(this).parent("select");a&&t[0]&&"select-one"==t[0].type&&t.find("option").selected(!1),this.selected=a}})}}(jQuery);