!function(n){"use strict";var a=void 0!==window.orientation,s=-1<navigator.userAgent.toLowerCase().indexOf("android");n.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."},dataName:"rawMaskFn"};var i=function(t,e){s||(this.$element=n(t),this.mask=String(e.mask),this.options=n.extend({},n.fn.inputmask.defaults,e),this.init(),this.listen(),this.checkVal())};i.prototype={init:function(){var s=n.mask.definitions;this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,n.each(this.mask.split(""),n.proxy(function(t,e){"?"==e?(0,this.partialPosition=t):s[e]?(this.tests.push(new RegExp(s[e])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=n.map(this.mask.split(""),n.proxy(function(t,e){if("?"!=t)return s[t]?this.options.placeholder:t},this)),this.focusText=this.$element.val(),this.$element.data(n.mask.dataName,n.proxy(function(){return n.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},listen:function(){if(!this.$element.attr("readonly")){var t=(n.browser.msie?"paste":"input")+".mask";this.$element.on("unmask",n.proxy(this.unmask,this)).on("focus.mask",n.proxy(this.focusEvent,this)).on("blur.mask",n.proxy(this.blurEvent,this)).on("keydown.mask",n.proxy(this.keydownEvent,this)).on("keypress.mask",n.proxy(this.keypressEvent,this)).on(t,n.proxy(this.pasteEvent,this))}},caret:function(e,s){if(0!==this.$element.length){if("number"==typeof e)return s="number"==typeof s?s:e,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(e,s);else if(this.createTextRange){var t=this.createTextRange();t.collapse(!0),t.moveEnd("character",s),t.moveStart("character",e),t.select()}});if(this.$element[0].setSelectionRange)e=this.$element[0].selectionStart,s=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var t=document.selection.createRange();e=0-t.duplicate().moveStart("character",-1e5),s=e+t.text.length}return{begin:e,end:s}}},seekNext:function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},seekPrev:function(t){for(;0<=--t&&!this.tests[t];);return t},shiftL:function(t,e){var s=this.mask.length;if(!(t<0)){for(var i=t,n=this.seekNext(e);i<s;i++)if(this.tests[i]){if(!(n<s&&this.tests[i].test(this.buffer[n])))break;this.buffer[i]=this.buffer[n],this.buffer[n]=this.options.placeholder,n=this.seekNext(n)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},shiftR:function(t){for(var e=this.mask.length,s=t,i=this.options.placeholder;s<e;s++)if(this.tests[s]){var n=this.seekNext(s),a=this.buffer[s];if(this.buffer[s]=i,!(n<e&&this.tests[n].test(a)))break;i=a}},unmask:function(){this.$element.unbind(".mask").removeData("inputmask")},focusEvent:function(){this.focusText=this.$element.val();var t=this.mask.length,e=this.checkVal();this.writeBuffer();var s=this,i=function(){e==t?s.caret(0,e):s.caret(e)};n.browser.msie?i():setTimeout(i,0)},blurEvent:function(){this.checkVal(),this.$element.val()!=this.focusText&&this.$element.trigger("change")},keydownEvent:function(t){var e=t.which;if(8==e||46==e||a&&127==e){var s=this.caret(),i=s.begin,n=s.end;return n-i==0&&(i=46!=e?this.seekPrev(i):n=this.seekNext(i-1),n=46==e?this.seekNext(n):n),this.clearBuffer(i,n),this.shiftL(i,n-1),!1}if(27==e)return this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1},keypressEvent:function(t){var e=this.mask.length,s=t.which,i=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||s<32)return!0;if(s){i.end-i.begin!=0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1));var n=this.seekNext(i.begin-1);if(n<e){var a=String.fromCharCode(s);if(this.tests[n].test(a)){this.shiftR(n),this.buffer[n]=a,this.writeBuffer();var h=this.seekNext(n);this.caret(h)}}return!1}},pasteEvent:function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},clearBuffer:function(t,e){for(var s=this.mask.length,i=t;i<e&&i<s;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},writeBuffer:function(){return this.$element.val(this.buffer.join("")).val()},checkVal:function(t){for(var e=this.mask.length,s=this.$element.val(),i=-1,n=0,a=0;n<e;n++)if(this.tests[n]){for(this.buffer[n]=this.options.placeholder;a++<s.length;){var h=s.charAt(a-1);if(this.tests[n].test(h)){this.buffer[n]=h,i=n;break}}if(a>s.length)break}else this.buffer[n]==s.charAt(a)&&n!=this.partialPosition&&(a++,i=n);return!t&&i+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||i+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,i+1))),this.partialPosition?n:this.firstNonMaskPos}},n.fn.inputmask=function(s){return this.each(function(){var t=n(this),e=t.data("inputmask");e||t.data("inputmask",e=new i(this,s))})},n.fn.inputmask.defaults={placeholder:"_"},n.fn.inputmask.Constructor=i,n(function(){n("body").on("focus.inputmask.data-api","[data-mask]",function(t){var e=n(this);e.data("inputmask")||(t.preventDefault(),e.inputmask(e.data()))})})}(window.jQuery);